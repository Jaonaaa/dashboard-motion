import React, { useEffect, useState } from "react";
import { motion } from "framer-motion";
const NotifRow = ({ notif, timer = 5000 }) => {
  const [on, setOn] = useState(true);
  const [exit, setExit] = useState(false);
  useEffect(() => {
    setTimeout(() => {
      removeMe();
    }, timer);
  });
  const removeMe = () => {
    setExit(true);
    setTimeout(() => {
      setOn(false);
    }, 450);
  };

  const capitalizeFirstLetter = (word) => {
    let text = word.charAt(0).toUpperCase() + word.slice(1);
    if (typeof text !== "string") text = "Invalid Title XD";
    if (text === "[object object]") text = "Object title detected :( ";
    return text;
  };

  return (
    <>
      {on && (
        <motion.div
          initial={{ x: "130%", y: 0 }}
          animate={exit ? { x: "130%", y: 0 } : { x: 0, y: 0 }}
          transition={{
            duration: 0.7,
            ease: "easeInOut",
          }}
        >
          <div className="notif_block">
            <div className="closer" onClick={removeMe}>
              {closer}
            </div>
            <div className="header">
              <div className="icon"> {icons[notif.status]}</div>
              <div className={`title_notif ${notif.status}`}>{capitalizeFirstLetter(notif.status)}</div>
            </div>
            <div className="body">{notif.body ? notif.body : "I'm blank :( "}</div>
          </div>
        </motion.div>
      )}
    </>
  );
};

const icons = {
  info: (
    <svg xmlns="http://www.w3.org/2000/svg" width="34" height="34" viewBox="0 0 34 34">
      <g id="info" transform="translate(-147 -752)">
        <rect
          id="Rectangle_14"
          data-name="Rectangle 14"
          width="34"
          height="34"
          transform="translate(147 752)"
          fill="rgba(240,100,100,0)"
        />
        <path
          id="Tracé_91"
          data-name="Tracé 91"
          d="M174.106,285.262A14.811,14.811,0,1,1,159.289,300a14.861,14.861,0,0,1,14.816-14.735Zm1.453,16.653h0c0-1.167.007-2.333,0-3.5a1.429,1.429,0,0,0-1.446-1.458c-.519-.01-1.041-.015-1.56,0a1.457,1.457,0,0,0-.287,2.865c.3.067.388.188.388.482q-.015,2.547,0,5.1c0,.269-.064.405-.356.477a1.451,1.451,0,0,0,.363,2.865c.957,0,1.916,0,2.872,0a1.451,1.451,0,0,0,.393-2.862c-.307-.079-.371-.222-.368-.5.012-1.154,0-2.311,0-3.465Zm-3.268-8.684a1.811,1.811,0,1,0,3.621.02,1.811,1.811,0,1,0-3.621-.02Z"
          transform="translate(-10.102 468.928)"
          fill="#1e6fd8"
        />
      </g>
    </svg>
  ),
  succes: (
    <svg xmlns="http://www.w3.org/2000/svg" width="28.215" height="28.218" viewBox="0 0 28.215 28.218">
      <path
        id="Tracé_90"
        data-name="Tracé 90"
        d="M254.058,155.59h2.094a1.746,1.746,0,0,0,.214.046,14.138,14.138,0,0,1,12.8,15.259,14.116,14.116,0,0,1-15.248,12.859,14.147,14.147,0,0,1-12.659-11.3c-.116-.566-.158-1.145-.255-1.714V168.65a2.208,2.208,0,0,0,.046-.241A14.124,14.124,0,0,1,252.7,155.79c.45-.079.906-.132,1.358-.2Zm8.921,8.473a.5.5,0,0,0-.325-.5.586.586,0,0,0-.692.193q-.913,1.031-1.83,2.059-3.295,3.706-6.582,7.414c-.165.186-.267.176-.448.03-1.156-.936-2.32-1.862-3.483-2.791-.488-.39-.971-.787-1.465-1.166a.544.544,0,0,0-.917.339.62.62,0,0,0,.286.562q1.024.815,2.043,1.635,1.679,1.341,3.355,2.684a.63.63,0,0,0,1.04-.1c.144-.167.293-.33.439-.495l5.141-5.784q1.6-1.8,3.2-3.6A.73.73,0,0,0,262.979,164.063Z"
        transform="translate(-241 -155.59)"
        fill="#32eb40"
      />
    </svg>
  ),
  error: (
    <svg xmlns="http://www.w3.org/2000/svg" width="34" height="34" viewBox="0 0 34 34">
      <g id="error" transform="translate(-147 -529)">
        <rect
          id="Rectangle_13"
          data-name="Rectangle 13"
          width="34"
          height="34"
          transform="translate(147 529)"
          fill="rgba(240,100,100,0)"
        />
        <path
          id="Tracé_87"
          data-name="Tracé 87"
          d="M190.639,15.809a15.085,15.085,0,1,1,14.895,15.108A15.114,15.114,0,0,1,190.639,15.809Zm13.626,0a.351.351,0,0,1-.139.208c-.312.325-.621.652-.937.971-1.187,1.2-2.369,2.4-3.566,3.58-.221.219-.214.349.013.542.288.243.552.514.823.774.3.286.3.286.582,0,1.479-1.48,2.962-2.958,4.434-4.445.178-.18.3-.208.481-.011.234.254.5.477.743.722,1.269,1.261,2.54,2.521,3.8,3.791.182.182.3.2.476,0,.288-.316.6-.615.907-.912.145-.139.16-.243.007-.384-.223-.206-.431-.427-.643-.644-1.3-1.318-2.6-2.64-3.906-3.951-.184-.184-.2-.319,0-.479a1.505,1.505,0,0,0,.156-.154c1.461-1.454,2.919-2.913,4.387-4.358.188-.186.191-.3,0-.472A11.8,11.8,0,0,1,211,9.7c-.2-.223-.323-.2-.522,0-1.472,1.472-2.956,2.932-4.437,4.4a.409.409,0,0,1-.652-.011c-1.457-1.459-2.919-2.913-4.367-4.38-.217-.219-.346-.217-.543.007a8.865,8.865,0,0,1-.844.843c-.251.215-.217.349,0,.568,1.481,1.463,2.949,2.941,4.419,4.415.08.08.182.145.2.264Z"
          transform="translate(-41.725 530.186)"
          fill="#fe5959"
        />
      </g>
    </svg>
  ),
  star: (
    <svg xmlns="http://www.w3.org/2000/svg" width="34" height="34" viewBox="0 0 34 34">
      <g id="star" transform="translate(-61 -672)">
        <rect
          id="Rectangle_10"
          data-name="Rectangle 10"
          width="34"
          height="34"
          transform="translate(61 672)"
          fill="rgba(255,255,255,0)"
        />
        <path
          id="Tracé_88"
          data-name="Tracé 88"
          d="M30.161,11.79a3.043,3.043,0,0,1-1.116,1.369q-2.09,1.834-4.183,3.667c-.524.458-1.038.931-1.574,1.375a.442.442,0,0,0-.175.5q.691,3,1.367,6c.175.765.362,1.529.512,2.3a1.614,1.614,0,0,1-2.4,1.694c-2-1.188-3.994-2.386-5.991-3.578-.421-.251-.851-.491-1.264-.754a.419.419,0,0,0-.506,0Q11.255,26.5,7.675,28.636a1.566,1.566,0,0,1-1.85-.014,1.6,1.6,0,0,1-.633-1.794c.61-2.668,1.211-5.34,1.829-8.008a.611.611,0,0,0-.228-.7c-2.078-1.8-4.139-3.611-6.2-5.424a1.577,1.577,0,0,1-.512-1.782A1.608,1.608,0,0,1,1.589,9.79q3.249-.3,6.5-.59c.536-.049,1.075-.1,1.611-.132a.646.646,0,0,0,.631-.448c1.052-2.508,2.125-5,3.194-7.5A1.629,1.629,0,0,1,15.535.062,1.663,1.663,0,0,1,16.624,1.1l1.535,3.6c.563,1.317,1.132,2.633,1.683,3.954a.571.571,0,0,0,.536.4c.968.076,1.934.162,2.9.251Q25.4,9.5,27.526,9.7c.333.031.664.062,1,.084a1.783,1.783,0,0,1,1.632,1.237v.767Z"
          transform="translate(62.927 674.535)"
          fill="#fade29"
        />
      </g>
    </svg>
  ),
  warning: (
    <svg xmlns="http://www.w3.org/2000/svg" width="34" height="34" viewBox="0 0 34 34">
      <g id="warning" transform="translate(-147 -675)">
        <rect
          id="Rectangle_11"
          data-name="Rectangle 11"
          width="34"
          height="34"
          transform="translate(147 675)"
          fill="rgba(240,100,100,0)"
        />
        <path
          id="Tracé_89"
          data-name="Tracé 89"
          d="M49.425,197.116A14.192,14.192,0,1,1,35.278,182.91,14.207,14.207,0,0,1,49.425,197.116Zm-14.206,3.7h1.27c.451,0,.509-.064.535-.515q.064-1.049.141-2.1.144-1.96.3-3.915c.075-.986.173-1.971.222-2.959a11.145,11.145,0,0,0,.086-2.249,2.559,2.559,0,0,0-2.848-2.134,2.586,2.586,0,0,0-2.271,2.6c.036.885.122,1.768.19,2.654.115,1.52.237,3.043.351,4.563.092,1.223.175,2.446.259,3.671a.369.369,0,0,0,.44.391c.443-.013.887,0,1.332,0Zm-2.1,4.332a2.108,2.108,0,1,0,2.134-2.1,2.087,2.087,0,0,0-2.134,2.1Z"
          transform="translate(128.768 494.898)"
          fill="#bfd918"
        />
      </g>
    </svg>
  ),
};

const closer = (
  <svg xmlns="http://www.w3.org/2000/svg" width="9.166" height="9.166" viewBox="0 0 9.166 9.166">
    <path
      id="Icon_material-close"
      data-name="Icon material-close"
      d="M16.666,8.423,15.742,7.5l-3.66,3.66L8.423,7.5,7.5,8.423l3.66,3.66L7.5,15.742l.923.923,3.66-3.66,3.66,3.66.923-.923-3.66-3.66Z"
      transform="translate(-7.5 -7.5)"
      fill="#7f7a7a"
    />
  </svg>
);
export default NotifRow;
